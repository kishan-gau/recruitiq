# ==============================================================================
# RecruitIQ Backend Environment Configuration
# ==============================================================================
# SECURITY: This is an EXAMPLE file. Copy to .env and fill with real values.
# NEVER commit .env file with real credentials to version control!
# ==============================================================================

# Environment
NODE_ENV=development
PORT=4000

# ==============================================================================
# DATABASE CONFIGURATION (DOCKER)
# ==============================================================================
# ⚠️  SECURITY REQUIREMENTS:
# 1. Generate strong passwords with: openssl rand -base64 32
# 2. NEVER use default passwords like 'postgres', 'admin', 'root', 'password'
# 3. Minimum 16 characters for production
#
# Production forbidden values:
# ❌ postgres, password, admin, root, test
# ❌ Less than 16 characters
POSTGRES_USER=postgres
POSTGRES_PASSWORD=<GENERATE_WITH_OPENSSL_RAND_BASE64_32>
POSTGRES_DB=recruitiq_dev
POSTGRES_PORT=5432

# Database Connection (same values as above)
DATABASE_URL=postgresql://postgres:<POSTGRES_PASSWORD>@localhost:5432/recruitiq_dev
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=recruitiq_dev
DATABASE_USER=postgres
DATABASE_PASSWORD=<SAME_AS_POSTGRES_PASSWORD_ABOVE>
DATABASE_SSL=false
DATABASE_POOL_MIN=20
DATABASE_POOL_MAX=100

# ==============================================================================
# PLATFORM/PORTAL DATABASE (for license management)
# ==============================================================================
# In production: separate database for customer/license/subscription data
# In development: can use same database as tenant data for simplicity
PLATFORM_DATABASE_HOST=localhost
PLATFORM_DATABASE_PORT=5432
PLATFORM_DATABASE_NAME=recruitiq_platform
PLATFORM_DATABASE_USER=postgres
PLATFORM_DATABASE_PASSWORD=<STRONG_RANDOM_PASSWORD>
PLATFORM_DATABASE_SSL=false

# ==============================================================================
# JWT SECRETS - CRITICAL SECURITY
# ==============================================================================
# ⚠️  SECURITY REQUIREMENTS:
# 1. Generate with: openssl rand -base64 48
# 2. Minimum 43 characters (256-bit security)
# 3. MUST be different from each other
# 4. NEVER use default/weak values like 'secret', 'test', 'password'
# 5. Use cryptographically secure random generation
#
# Production forbidden values:
# ❌ test, dev, demo, example, secret, password, admin, default
# ❌ Same value for JWT_SECRET and JWT_REFRESH_SECRET
# ❌ Less than 43 characters
JWT_SECRET=<GENERATE_WITH_OPENSSL_RAND_BASE64_48>
JWT_REFRESH_SECRET=<GENERATE_DIFFERENT_VALUE_WITH_OPENSSL_RAND_BASE64_48>

# Industry standard token expiry times
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ==============================================================================
# REDIS CONFIGURATION (DOCKER)
# ==============================================================================
# ⚠️  SECURITY REQUIREMENTS:
# 1. Password is REQUIRED for Redis (prevents unauthorized access)
# 2. Generate with: openssl rand -base64 32
# 3. CRITICAL: Never run Redis without authentication in production!
#
# Production forbidden values:
# ❌ postgres, password, admin, root
# ❌ Missing or empty password when REDIS_ENABLED=true
REDIS_ENABLED=true
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=<GENERATE_WITH_OPENSSL_RAND_BASE64_32>
REDIS_PORT=6379
REDIS_DB=0

# Email (Nodemailer)
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=your-smtp-user
SMTP_PASSWORD=your-smtp-password
EMAIL_FROM=noreply@recruitiq.com
EMAIL_FROM_NAME=RecruitIQ

# AWS S3 (for file uploads)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=recruitiq-uploads
AWS_S3_BUCKET_REGION=us-east-1

# Stripe (for billing)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key

# Frontend URL (CORS)
FRONTEND_URL=http://localhost:5173
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ==============================================================================
# ENCRYPTION - CRITICAL SECURITY
# ==============================================================================
# ⚠️  SECURITY REQUIREMENTS:
# 1. Generate with: openssl rand -hex 64
# 2. Minimum 128 characters (64 bytes in hex = 512 bits)
# 3. NEVER use default values like 'default-encryption-key', 'change-this'
# 4. Must be hexadecimal (0-9, a-f characters only)
#
# Production forbidden values:
# ❌ default-encryption-key, change-this, dev-key, test-key
# ❌ Less than 128 characters
# ❌ Non-hexadecimal characters
ENCRYPTION_KEY=<GENERATE_WITH_OPENSSL_RAND_HEX_64>

# Alternative name (ENCRYPTION_MASTER_KEY is primary)
ENCRYPTION_MASTER_KEY=<SAME_AS_ENCRYPTION_KEY>

# ==============================================================================
# SESSION SECRET - CRITICAL SECURITY
# ==============================================================================
# ⚠️  SECURITY REQUIREMENTS:
# 1. Generate with: openssl rand -base64 64
# 2. Minimum 64 characters
# 3. NEVER use default values
#
# Production forbidden values:
# ❌ secret, test, dev, demo, password
# ❌ Less than 64 characters
SESSION_SECRET=<GENERATE_WITH_OPENSSL_RAND_BASE64_64>

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
REQUIRE_HTTPS=false
TRUST_PROXY=false

# ==============================================================================
# APPLICATION
# ==============================================================================
APP_NAME=RecruitIQ
APP_URL=http://localhost:4000
API_VERSION=v1

# ==============================================================================
# LOGGING
# ==============================================================================
LOG_LEVEL=info
LOG_FILE_PATH=logs/app.log

# ==============================================================================
# DEPLOYMENT CONFIGURATION
# ==============================================================================
DEPLOYMENT_TYPE=onpremise
TENANT_ID=dev-tenant
INSTANCE_ID=dev-instance

# ==============================================================================
# SECURITY MONITORING
# ==============================================================================
SECURITY_MONITORING_ENABLED=true
CENTRAL_LOGGING_ENABLED=false
CENTRAL_MONITORING_ENABLED=false

# Feature Flags
ENABLE_WEBSOCKETS=true
ENABLE_FILE_UPLOADS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_AUDIT_LOGS=true

# License Validation
LICENSE_API_URL=https://license.recruitiq.com
LICENSE_CHECK_INTERVAL_HOURS=24

# ==============================================================================
# TRANSIP VPS MANAGEMENT (Optional)
# ==============================================================================
# TransIP API for VPS provisioning and management
# Required only if using dedicated VPS deployment model
# Get credentials from: https://www.transip.nl/cp/account/api/
TRANSIP_ENABLED=false
TRANSIP_USERNAME=your-transip-username
TRANSIP_PRIVATE_KEY_PATH=./transip-private.key
TRANSIP_TEST_MODE=true
TRANSIP_VPS_NAME=your-vps-name

# ==============================================================================
# SECRETS PROVIDER CONFIGURATION
# ==============================================================================
# Choose secrets provider:
#   - 'environment' (default): Load from .env file or environment variables
#   - 'barbican': Load from OpenStack Barbican (recommended for production)
SECRETS_PROVIDER=environment

# ==============================================================================
# BARBICAN CONFIGURATION (Production Secrets Management)
# ==============================================================================
# OpenStack Barbican endpoint for secure secrets storage
# Required when SECRETS_PROVIDER=barbican
#
# Setup Guide:
# 1. Deploy OpenStack Barbican service
# 2. Create project and user credentials
# 3. Set environment variables below
# 4. Use CLI to store secrets: npm run secrets:store JWT_SECRET <value>
# 5. Test connection: npm run secrets:health

# Barbican Service Endpoint
# Example: https://barbican.example.com:9311
BARBICAN_ENDPOINT=

# OpenStack Keystone Authentication
# Example: https://keystone.example.com:5000/v3
OPENSTACK_AUTH_URL=
OPENSTACK_USERNAME=
OPENSTACK_PASSWORD=<GENERATE_WITH_OPENSSL_RAND_BASE64_32>
OPENSTACK_PROJECT_NAME=recruitiq
OPENSTACK_PROJECT_DOMAIN=default
OPENSTACK_USER_DOMAIN=default

# Barbican Cache Settings
# How long to cache secrets in memory (milliseconds)
# Default: 300000 (5 minutes)
BARBICAN_CACHE_TTL=300000

# ==============================================================================
# CLI USAGE EXAMPLES
# ==============================================================================
# Generate a secret:
#   npm run secrets:generate JWT_SECRET
#
# Store in Barbican:
#   npm run secrets:store JWT_SECRET <generated-value>
#
# Retrieve from Barbican:
#   npm run secrets:get JWT_SECRET
#
# Rotate secret:
#   npm run secrets:rotate JWT_SECRET
#
# List all secrets:
#   npm run secrets:list
#
# Check Barbican health:
#   npm run secrets:health
# ==============================================================================

# ==============================================================================
# TRANSIP VPS CONFIGURATION
# ==============================================================================
# TransIP API credentials for VPS provisioning in Portal
# 
# Setup Guide:
# 1. Log into TransIP control panel: https://www.transip.nl/cp/
# 2. Navigate to API section
# 3. Create new API key with VPS permissions
# 4. Copy username and private key below
#
# Test Mode:
# - Automatically enabled in development (NODE_ENV !== 'production')
# - All API calls append ?test=1 to simulate operations
# - No real VPS resources created or charged
# - Safe for unlimited testing
#
# Production Mode:
# - Enabled when NODE_ENV=production
# - Creates real VPS instances
# - Charges apply for resources
# - Only enable when ready for production deployments

# TransIP Username (your TransIP account name)
TRANSIP_USERNAME=

# TransIP Private Key (paste multi-line RSA key)
# Generate from: https://www.transip.nl/cp/account/api/
TRANSIP_PRIVATE_KEY=

# Optional: SSH Keys to install on new VPS instances
# Comma-separated list of SSH public keys
# Example: ssh-rsa AAAAB3NzaC1... user@host,ssh-rsa AAAAB3NzaC2... admin@host
TRANSIP_SSH_KEYS=

# ==============================================================================
