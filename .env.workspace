# ============================================================================
# RecruitIQ Workspace Configuration
# Root-level environment variables shared across all applications
# ============================================================================
# 
# This file contains shared configuration for the entire monorepo.
# Individual apps can override these settings in their own .env files.
#
# Setup:
# 1. Copy this file to .env in the workspace root
# 2. Update the values below for your environment
# 3. Individual apps will inherit these values automatically

# ============================================================================
# BACKEND CONFIGURATION
# ============================================================================

# Backend API URL (used by all frontend apps)
BACKEND_URL=https://recruitiq-be-dev.ngrok.app

# Backend Port
BACKEND_PORT=4000

# ============================================================================
# COOKIE CONFIGURATION (Shared across all auth controllers)
# ============================================================================

# Cookie Domain - Use .ngrok.app for ngrok, .localhost for local, .recruitiq.com for production
COOKIE_DOMAIN=.ngrok.app

# Cookie Secure - MUST be true for HTTPS (ngrok, production)
COOKIE_SECURE=true

# Cookie SameSite - Use 'none' for cross-domain (ngrok), 'lax' or 'strict' for same-domain
COOKIE_SAME_SITE=none

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Allowed Origins (comma-separated, no spaces)
# NOTE: Portal is NOT included here - it runs on separate infrastructure
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:5174,http://localhost:5175,https://nexus-dev.ngrok.app,https://paylinq-dev.ngrok.app,https://recruitiq-dev.ngrok.app,https://recruitiq-be-dev.ngrok.app

# ============================================================================
# FRONTEND URLS (For redirects, emails, etc.)
# ============================================================================
# NOTE: Portal is NOT included - it has separate backend/database/deployment

NEXUS_URL=https://nexus-dev.ngrok.app
PAYLINQ_URL=https://paylinq-dev.ngrok.app
RECRUITIQ_URL=https://recruitiq-dev.ngrok.app

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

DATABASE_URL=postgresql://postgres:postgres@localhost:5432/recruitiq_dev
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=recruitiq_dev
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_SSL=false

# Database Pool Settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ============================================================================
# JWT SECRETS (CHANGE THESE IN PRODUCTION!)
# ============================================================================

JWT_SECRET=49Po1WIS6phVRObKvmgwNT7iBXzxJUCtcY2AD0Mrnfd3e85F
JWT_REFRESH_SECRET=qeJuLy39WVlUFTo5O16kZfGsY2IDCgwmc0PjRXNMbKEBpnSr
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

REDIS_ENABLED=true
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

NODE_ENV=development
LOG_LEVEL=debug

# ============================================================================
# FEATURE FLAGS
# ============================================================================

ENABLE_EMAIL_VERIFICATION=false
ENABLE_MFA=false
ENABLE_AUDIT_LOGGING=true

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

ENCRYPTION_KEY=c5e1a7b3d9f2e4c6a8b0d2f4e6c8a0b2d4f6e8c0a2b4d6f8e0c2a4b6d8f0e2c4
SESSION_SECRET=8a7b6c5d4e3f2g1h9i8j7k6l5m4n3o2p
BCRYPT_ROUNDS=12

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# NOTES
# ============================================================================
#
# Environment-Specific Configurations:
#
# DEVELOPMENT (localhost):
#   BACKEND_URL=http://localhost:4000
#   COOKIE_DOMAIN=undefined (or .localhost)
#   COOKIE_SECURE=false
#   COOKIE_SAME_SITE=lax
#
# DEVELOPMENT (ngrok):
#   BACKEND_URL=https://recruitiq-be-dev.ngrok.app
#   COOKIE_DOMAIN=.ngrok.app
#   COOKIE_SECURE=true
#   COOKIE_SAME_SITE=none
#
# PRODUCTION:
#   BACKEND_URL=https://api.recruitiq.com
#   COOKIE_DOMAIN=.recruitiq.com
#   COOKIE_SECURE=true
#   COOKIE_SAME_SITE=strict (or lax for SSO)
#
# IMPORTANT: Portal (Platform Admin) is SEPARATE
#   - Portal runs on separate server with its own backend/database
#   - Portal has its own .env configuration
#   - Portal is NOT part of tenant SSO domain
#   - Portal uses platform_* cookies (not tenant_* cookies)
#
